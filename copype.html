<!DOCTYPE html>
<html>
  <head>
    <title>BCr.map</title>
    <meta charset="utf-8">
    
    <!-- ページのスケールを設定 -->
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>

    <!-- icon -->
    <link rel='stylesheet' href='https://cdn.materialdesignicons.com/2.6.95/css/materialdesignicons.min.css'>
    <script defer src='https://use.fontawesome.com/releases/v5.1.0/js/all.js'></script>

    <!-- bulma -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.1/css/bulma.min.css'>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="">
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
    <style type="text/css">
      .main {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }

      #mapid { 
        height: 100%;
        width: 100%;
      }

      .widget {
        position: absolute;
        pointer-events: none;
        z-index: 1000;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      .widget button, .widget input {
        pointer-events: auto;
      }

      #btnCurLocation { 
        width: 50px;
        height: 50px;
      }
    </style>
  </head>
  <body>
    <div class='main'>
      <div id="mapid"></div>

      <div class='widget'>
        <div class='buttons is-right'>
            <button id="btnCurLocation" class='button is-warning' onClick="setCurLocation()"><i class='mdi mdi-crosshairs-gps'></i></button>
        </div>
      </div>
    </div>
 
    <script>
      let mymap = null;

      window.addEventListener('load', () => {
        mymap = L.map('mapid').setView([35.7102, 139.8132], 10);
  
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 18,
          attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, '
        }).addTo(mymap);

        setCurLocation();
      });

      function setCurLocation() {
        if (navigator.geolocation == false){
          alert('Cannot catch your current location.');
          return;
        }

        function success(e) {
          var lat  = e.coords.latitude;
          var lng = e.coords.longitude;
          mymap.setView([lat, lng], 17);
          L.marker([lat,lng]).addTo(mymap).openPopup();
        };

        function error() {
          alert('Cannot catch your current location.');
        };

        navigator.geolocation.getCurrentPosition(success, error);

        var searchLayer = L.layerGroup().addTo(map);
        //... adding data in searchLayer ...
        map.addControl( new L.Control.Search({layer: searchLayer}) );
        //searchLayer is a L.LayerGroup contains searched markers
      }
    </script>
  </body>
</html>